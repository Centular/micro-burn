<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head><meta content="text/html; charset=UTF-8" http-equiv="content-type" /><title>Home</title></head>
  <body class="lift:content_id=main">
    <div id="main" data-lift="surround?with=default;at=content">
      <script data-lift="MicroBurnServices"></script>
      <script type="application/javascript" src="js/MicroBurnApp.js"></script>
      <div ng-app="MicroBurnApp">
        <div id="project-panel" ng-controller="ProjectCtrl" data-lift="Angular.bind?type=ProjectStateBinder">
          <select ng-model="selectedSprint" id="sprint-select"
                  ng-options="sprint.details.formattedName for sprint in sprintsOrdered track by sprint.id"
                  ng-disabled="editMode">
          </select>
          <div>
            <span class="sprint-details">
              from: <input type="text" id="start-date" ng-model="editedSprint.start" ng-disabled="!editMode" class="date-input">
                to: <input type="text" id="end-date" ng-model="editedSprint.end" ng-disabled="!editMode" class="date-input">
              <script type="application/javascript">
                $('#start-date').datetimepicker({
                  lang: "en",
                  dayOfWeekStart: 1,
                  format: window.dateFormat
                });
                $('#end-date').datetimepicker({
                  lang: "en",
                  dayOfWeekStart: 1,
                  format: window.dateFormat
                });
              </script>
              <span id="actions-panel">
                <button ng-click="finishSprint()" ng-disabled="!selectedSprint.details.isActive">Finish</button>
                <button ng-click="editSprint()" ng-disabled="existsActiveSprint">Create new</button>
              </span>
              <span id="risky-actions-panel">
                <button ng-click="askForRemoveSprint()" ng-disabled="selectedSprint == null || selectedSprint.details.isActive">Remove</button>
              </span>
            </span>
          </div>
          <div class="sprint-details" ng-if="editMode">
            name: <input type="text" ng-model="editedSprint.name" id="name-input"/>
            <span class="confirm-panel">
              <button ng-click="startSprint()">Start</button>
              <button ng-click="discard()">Discard</button>
            </span>
          </div>
          <div class="sprint-details" ng-if="removeDecisionMode">
            Are you sure want to remove '{{selectedSprint.details.name}}'?
            <span class="confirm-panel">
              <button ng-click="removeSprint()">Yes</button>
              <button ng-click="discard()">Cancel</button>
            </span>
          </div>
          <div sprint-chart></div>
        </div>
      </div>
    </div>
  </body>
</html>

